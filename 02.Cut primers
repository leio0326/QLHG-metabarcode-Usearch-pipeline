# 02.Cut primers for different PE reads
#!/bin/bash
cd "your working path"
input_dir="01.Trimmomatic" # Last step output path
output_dir="02.Cutprimer"
mkdir -p "$output_dir"
#Parameters - g and - G correspond to the forward and reverse primer sequences
for file1 in "$input_dir"/*_1_trimmed.fq; do
    file2="${file1/_1_trimmed.fq/_2_trimmed.fq}"
    if [[ -f "$file2" ]]; then
        base_name=$(basename "$file1" "_1_trimmed.fq")
        cutadapt -g ^ACWGGWTGRACWGTNTAYCC -G ^TCDGGRTGNCCRAARAAYCA -e 0.1 -m 200 --no-indel --pair-filter=any --discard-untrimmed -o "$output_dir/${base_name}_1.fq" -p "$output_dir/${base_name}_2.fq" "$file1" "$file2"
        echo "Processed: $file1 and $file2"
    else
        echo "Lost: $file2"
    fi
done
